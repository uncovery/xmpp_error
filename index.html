<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Xmpp_error : A lightweight PHP error reporting and tracking tool using XMPP/Jabber messages">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Xmpp_error</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/uncovery/xmpp_error">View on GitHub</a>

          <h1 id="project_title">Xmpp_error</h1>
          <h2 id="project_tagline">A lightweight PHP error reporting and tracking tool using XMPP/Jabber messages</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/uncovery/xmpp_error/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/uncovery/xmpp_error/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="xmpp_error" class="anchor" href="#xmpp_error"><span class="octicon octicon-link"></span></a>XMPP_ERROR</h1>

<h4>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements:</h4>

<ul>
<li>JAXL: <a href="http://jaxl.readthedocs.org/en/latest/">http://jaxl.readthedocs.org/en/latest/</a>
This library will allow PHP to send XMPP/Jabber messages</li>
<li>2 Jabber accounts: One for the sending PHP script (server), one for the 
receiving user or admin (client)</li>
<li>A writable directory on your webserver where error reports are stored. Those
are attached to the XMPP messages since they are too large to be sent. For 
security reasons, you can make this directory password protected via .htaccess</li>
</ul>

<h4>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features:</h4>

<ul>
<li>Sending error messages of any level (error, warning, notice etc)</li>
<li>Excluding certain error types or files from generating a message</li>
<li>Tracking of functions and their arguments or variables throughout the script 
to identify procedure paths taken and variable changes</li>
<li>Millisecond-timing of all steps</li>
<li>In-process errors from the start of the script until shutdown</li>
<li>XMPP status messages outside of error reports to the client</li>
<li>Multiple recipients for messages</li>
</ul>

<h4>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation:</h4>

<ul>
<li>Setup the required 2 XMPP accounts on your XMPP server, the server account 
to send messages from PHP and the client account that received messages.</li>
<li>Setup an XMPP client to receive messages from the server XMPP account</li>
<li>Configure config.default.php as required</li>
<li>Rename config.default.php to config.php</li>
<li>Test the setup by running test.php . If you run this from the command line,
make sure you run it as a user that can write files to the 
$XMPP_ERROR['config']['path'] folder. If successful, you should get 2 XMPP 
messages with a timestamp: 

<ul>
<li>This is a test XMPP Message</li>
<li>E_NOTICE: Undefined variable: test in line 16 of file /xmpp_error/test.php
This last message should have a link attached to a HTML file that contains the
$XMPP_ERROR error report with 3 elements</li>
</ul>
</li>
<li>Include the file xmpp_error.php in your project, possibly at first with a line 
such as 
<code>
  require_once('/path/to/xmpp_error.php');
</code>
</li>
</ul>

<h4>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage:</h4>

<ul>
<li>After installation is complete, errors should generate reports in the
configured folder and send XMPP messages to the configured recipient</li>
<li>Further, as from the examples in test.php, one can include tracer calls at the 
beginning of any function to include their names and arguments into the error 
report. The __FUNCTION__ will set the current function name, and 
func_get_args() will insert the arguments into the error report. 
You can use the same function with any other arguments (preferably a 
description for the first, and a variables for the second to insert a trace 
for any variables in script.</li>
</ul>

<div class="highlight highlight-php"><pre>    <span class="k">function</span> <span class="nf">sample_function</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nv">$c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">XMPP_ERROR_trace</span><span class="p">(</span><span class="nx">__FUNCTION__</span><span class="p">,</span> <span class="nb">func_get_args</span><span class="p">());</span>
    <span class="p">}</span>
</pre></div>

<ul>
<li>Even further, one can trigger an error report on specific parts of the script.
This is specially helpful if certain conditions of the script should not be 
met under any "healthy" conditions:</li>
</ul>

<div class="highlight highlight-php"><pre>    <span class="k">function</span> <span class="nf">sample_function2</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$value</span> <span class="o">==</span> <span class="s2">"good_value_1"</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// perform action</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">XMPP_ERROR_trigger</span><span class="p">(</span><span class="s2">"Value has unexpected contents: </span><span class="si">$value</span><span class="s2">"</span><span class="p">);</span>
        <span class="p">}</span>
</pre></div>

<ul>
<li>Simpler, one can trigger notifications to the admin for not-so-often occuring
actions to be aware about general activity of the project. This is not an
error report, but rather a status message.</li>
</ul>

<div class="highlight highlight-php"><pre>    <span class="k">function</span> <span class="nf">sample_function_user_registration</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">XMPP_ERROR_send_msg</span><span class="p">(</span><span class="s2">"A new user has registered on the site!"</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Xmpp_error maintained by <a href="https://github.com/uncovery">uncovery</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
